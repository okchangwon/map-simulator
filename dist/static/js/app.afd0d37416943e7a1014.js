webpackJsonp([0],{"+5+h":function(t,e){},"/i6+":function(t,e,i){"use strict";var o={name:"MapLayer",props:{viewport:{type:Object}},data:function(){return{columnCount:41,rowCount:41,tileWidth:960,tileHeight:540,tileImagePath:"static/map/bravo/enchiladacoke",mapWidth:0,mapHeight:0,tiles:[]}},mounted:function(){var t=this;this.mapWidth=this.columnCount*this.tileWidth,this.mapHeight=this.rowCount*this.tileHeight,this.$nextTick(function(){t.createTiles()})},computed:{visibleTiles:function(){for(var t=[],e=Math.floor(this.viewport.left/this.tileWidth),i=Math.ceil(this.viewport.width/this.tileWidth)+1,o=Math.floor(this.viewport.top/this.tileHeight),r=Math.ceil(this.viewport.height/this.tileHeight)+1,a=o;a<o+r;a++)for(var n=e;n<e+i;n++)this.tiles[a]&&this.tiles[a][n]&&t.push(this.tiles[a][n]);return t}},methods:{isVisibleTile:function(t){return-1!==this.visibleTiles.indexOf(t)&&!t.disabled},createTiles:function(){for(var t=[],e=0;e<this.rowCount;e++)for(var i=0;i<this.columnCount;i++){t[e]||(t[e]={});var o=i,r=this.rowCount-e-1,a=o+"_"+r;t[e][i]={key:a,x:o,y:r,i:e,j:i,loaded:!1,disabled:!1}}this.tiles=t},getSourceURL:function(t,e){return this.tileImagePath+"/"+t+"_"+e+".jpeg"},onLoadImage:function(t){t.loaded=!0},onErrorLoadImage:function(t){t.disabled=!0}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",{staticClass:"map-layer",style:{width:t.mapWidth+"px",height:t.mapHeight+"px"},on:{dragstart:function(t){t.preventDefault()}}},t._l(t.tiles,function(e){return i("tr",t._l(e,function(e){return i("td",{staticClass:"tile",style:{width:t.tileWidth+"px",height:t.tileHeight+"px"}},[t.isVisibleTile(e)?i("img",{key:e.key,style:{opacity:e.loaded?1:0},attrs:{src:t.getSourceURL(e.x,e.y)},on:{load:function(i){t.onLoadImage(e)},error:function(i){t.onErrorLoadImage(e)}}}):t._e()])}))}))},staticRenderFns:[]};var a=i("VU/8")(o,r,!1,function(t){i("+5+h")},"data-v-06d6408d",null);e.a=a.exports},"0/0x":function(t,e,i){"use strict";(function(t){e.a={name:"GridLayer",props:{viewport:{type:Object}},data:function(){return{rowCount:40,columnCount:40,cellWidth:33,cellHeight:33,cells:[]}},computed:{tableWidth:function(){return 33*this.columnCount},tableHeight:function(){return 33*this.rowCount},adjustLeft:function(){return-32-this.viewport.left%152.814},adjustTop:function(){return 8-this.viewport.top%87.603}},mounted:function(){var t=this;this.$nextTick(function(){t.createCells(),t.updateCellXY(),t.setPositionByViewport()})},watch:{"viewport.left":function(){t(this.$el).css({left:this.viewport.left}),this.updateCellXY()},"viewport.top":function(){t(this.$el).css({top:this.viewport.top}),this.updateCellXY()}},methods:{setPositionByViewport:function(){t(this.$el).css({left:this.viewport.left+this.viewport.width/2,top:this.viewport.top+this.viewport.height/2})},updateCellXY:function(){for(var t=this.cells,e=0;e<this.rowCount;e++)for(var i=0;i<this.columnCount;i++){var o=e+1e3,r=i+1e3;o=o-Math.floor(this.viewport.left/152.814)+Math.floor(this.viewport.top/87.603),r=r+Math.floor(this.viewport.left/152.814)+Math.floor(this.viewport.top/87.603),t[e][i]={x:o,y:r}}},createCells:function(){for(var t=[],e=0;e<this.rowCount;e++)for(var i=0;i<this.columnCount;i++)t[e]||(t[e]={}),t[e][i]={x:0,y:0};this.cells=t},onClickCell:function(t){this.$emit("click",t)}}}}).call(e,i("7t+N"))},"0Vdb":function(t,e,i){"use strict";(function(t){var o=i("/i6+"),r=i("x01T");e.a={name:"MapArea",components:{MapLayer:o.a,GridLayer:r.a},data:function(){return{viewport:{left:localStorage.getItem("viewportLeft")||21835,top:localStorage.getItem("viewportTop")||10135,width:0,height:0}}},mounted:function(){var e=this;this.$nextTick(function(){e.setScroll(),e.viewport.width=t(e.$refs.stage).width(),e.viewport.height=t(e.$refs.stage).height(),e.viewport.mapWidth=e.$refs.mapLayer.$data.mapWidth,e.viewport.mapHeight=e.$refs.mapLayer.$data.mapHeight,t(window).on("resize",function(){e.viewport.width=t(e.$refs.stage).width(),e.viewport.height=t(e.$refs.stage).height()})})},watch:{"viewport.left":function(e){t(this.$refs.stage).scrollLeft(e),localStorage.setItem("viewportLeft",e)},"viewport.top":function(e){t(this.$refs.stage).scrollTop(e),localStorage.setItem("viewportTop",e)}},methods:{setScroll:function(){t(this.$refs.stage).scrollLeft(this.viewport.left),t(this.$refs.stage).scrollTop(this.viewport.top)},setViewportToCenter:function(){this.viewport.left=this.$refs.mapLayer.$data.mapWidth/2,this.viewport.top=this.$refs.mapLayer.$data.mapHeight/2},onScroll:function(e){var i=t(e.target);return this.viewport.left=i.scrollLeft(),this.viewport.top=i.scrollTop(),e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),!1},onMousewheel:function(t){var e=Math.max(0,this.viewport.left+3*t.deltaX),i=Math.max(0,this.viewport.top+3*t.deltaY);e=Math.min(e,this.$refs.mapLayer.$data.mapWidth-this.viewport.width),i=Math.min(i,this.$refs.mapLayer.$data.mapHeight-this.viewport.height),this.viewport.left=e,this.viewport.top=i},onClickGridCell:function(t){console.log(t)}}}}).call(e,i("7t+N"))},J1cD:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("7+uW"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrap"},[e("router-view")],1)},staticRenderFns:[]},a=i("VU/8")({name:"App"},r,!1,null,null,null).exports,n=i("/ocq"),s=i("0Vdb"),l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"map-area"},[i("div",{ref:"stage",staticClass:"map-scroll-stage",on:{scroll:t.onScroll,mousewheel:function(e){e.preventDefault(),t.onMousewheel(e)}}},[i("map-layer",{ref:"mapLayer",attrs:{viewport:t.viewport}}),t._v(" "),i("grid-layer",{attrs:{viewport:t.viewport},on:{click:t.onClickGridCell}})],1),t._v(" "),i("div",{staticClass:"map-pos"},[t._v(t._s(Math.floor(t.viewport.left))+","+t._s(Math.floor(t.viewport.top)))])])},staticRenderFns:[]};var h=function(t){i("Y2hY")},c={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tool-area"},[e("h1",[this._v("듀랑고 맵 시뮬레이터")])])}]};var p={name:"MapSimulator",components:{MapArea:i("VU/8")(s.a,l,!1,h,"data-v-398f93c7",null).exports,ToolArea:i("VU/8")({name:"ToolArea"},c,!1,function(t){i("kTKd")},"data-v-e8a37282",null).exports},data:function(){return{}},mounted:function(){}},u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"map-simulator"},[e("map-area"),this._v(" "),e("tool-area")],1)},staticRenderFns:[]};var f=i("VU/8")(p,u,!1,function(t){i("J1cD")},"data-v-e6ac1fbe",null).exports,d={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("404 Not Found")])},staticRenderFns:[]};i("VU/8")({},d,!1,null,null,null).exports;o.a.use(n.a);var v=new n.a({routes:[{path:"/",redirect:"/map-simulator"},{path:"/map-simulator",name:"map-simulator",component:f}]});o.a.config.productionTip=!1,new o.a({el:"#app",router:v,components:{App:a},template:"<App/>"})},Y2hY:function(t,e){},kTKd:function(t,e){},m217:function(t,e){},x01T:function(t,e,i){"use strict";var o=i("0/0x"),r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"grid-layer"},[i("table",{ref:"table",style:{width:t.tableWidth+"px",height:t.tableHeight+"px",left:t.adjustLeft+"px",top:t.adjustTop+"px"}},t._l(t.cells,function(e){return i("tr",t._l(e,function(e){return i("td",{staticClass:"cell",style:{width:t.cellWidth+"px",height:t.cellHeight+"px"},attrs:{title:e.x+", "+e.y},on:{click:function(i){t.onClickCell(e)}}})}))}))])},staticRenderFns:[]};var a=function(t){i("m217")},n=i("VU/8")(o.a,r,!1,a,"data-v-9bc31e76",null);e.a=n.exports}},["NHnr"]);
//# sourceMappingURL=app.afd0d37416943e7a1014.js.map